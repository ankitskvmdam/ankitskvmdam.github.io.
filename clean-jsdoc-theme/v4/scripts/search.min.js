var searchData;function hideSearch(){var e=document.querySelector("#search-container");e&&(e.style.display="none")}function listenKey(e){"Escape"===e.key&&(hideSearch(),window.removeEventListener("keyup",listenKey))}function showSearch(){var e=document.querySelector("#search-container"),t=document.querySelector("#search-input");e&&(e.style.display="flex",window.addEventListener("keyup",listenKey)),t&&t.focus()}function fetchAllData(t={}){fetch("../data/search.json").then(function(e){return e.json()}).then(function(e){searchData=e.list,"function"==typeof t.onSuccess&&t.onSuccess(e.list)}).catch(function(e){console.error(e),"function"==typeof t.onError&&t.onError()})}function buildSearchResult(e){var t="";for(const r of e){var n=r.item;t+=`

    <a href="${r.item.link.replace('<a href="',"").replace(/">.*/,"")}" class="search-result-item">
      <div class="search-result-item-title">
          ${n.title}
      </div>
      <div class="search-result-item-p">
          ${n.description||"No description available."}
      </div>
    </a>
    `}return t}function getSearchResult(e,t,n){var t={shouldSort:!0,threshold:.4,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:t},r=Fuse.createIndex(t.keys,e),e=new Fuse(e,t,r).search(n);return e=20<e.length?e.slice(0,20):e}function debounce(n,r,c){var o;return function(){var e=this,t=arguments;clearTimeout(o),o=setTimeout(function(){o=null,c||n.apply(e,t)},r),c&&!o&&n.apply(e,t)}}function search(e){var t=e.target.value,n=document.querySelector("#search-result-c"),r=["title","description"];if(n)if(t){if(!searchData)return n.innerHTML="Loading...",void fetchAllData({onSuccess:function(e){console.log("Onsucess"),c(getSearchResult(e,r,t))},onError:function(){n.innerHTML="Failed to load result."}});c(getSearchResult(searchData,r,t))}else n.innerHTML="Type anything to view search result";else console.error("Search result container not found");function c(e){0===e.length?n.innerHTML="No result found! Try some different combination.":(e=buildSearchResult(e),n.innerHTML=e)}}function onDomContentLoaded(){var e=document.querySelector("#search-input"),t=document.querySelectorAll(".search-button"),n=document.querySelector("#search-container"),r=document.querySelector("#search-wrapper"),c=debounce(search,300);t&&t.forEach(function(e){e.addEventListener("click",showSearch)}),n&&n.addEventListener("click",hideSearch),r&&r.addEventListener("click",function(e){e.stopPropagation()}),e&&e.addEventListener("keyup",c)}window.addEventListener("DOMContentLoaded",onDomContentLoaded);